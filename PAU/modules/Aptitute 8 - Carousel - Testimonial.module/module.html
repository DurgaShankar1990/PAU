{% macro buildID() %}
  {% if module.settings.css__id %} id="{{ module.settings.css__id }}" {% endif %}
{% endmacro %}

{% macro buildClass() %}{% if module.settings.css__class %}{{ module.settings.css__class }}{% endif %}{% endmacro %}


{% macro buildModuleStyles() %}
  padding-top: {{ module.paddings.desktop.module.top }}px;
  padding-bottom: {{ module.paddings.desktop.module.bottom }}px;
  padding-left:  {{ module.paddings.desktop.module.left }}px;
  padding-right: {{ module.paddings.desktop.module.right }}px;

  margin-top: {{ module.margins.desktop.module.top }}px;
  margin-bottom: {{ module.margins.desktop.module.bottom }}px;
  margin-left: {{ module.margins.desktop.module.left }}px;
  margin-right: {{ module.margins.desktop.module.right }}px;

  width: 100%;

{% endmacro %}

{% macro buildImageStyles() %}
  padding-top: {{ module.paddings.desktop.image.top }}px;
  padding-bottom: {{ module.paddings.desktop.image.bottom }}px;
  padding-left: {{ module.paddings.desktop.image.left }}px;
  padding-right: {{ module.paddings.desktop.image.right }}px;
  text-align: left;  
{% endmacro %}

{% macro buildContentStyles() %}
  padding-top: {{ module.paddings.desktop.content.top }}px;
  padding-bottom: {{ module.paddings.desktop.content.bottom }}px;
  padding-left: {{ module.paddings.desktop.content.left }}px;
  padding-right: {{ module.paddings.desktop.content.right }}px;
{% endmacro %}

{% macro buildImage() %} 

{% endmacro %}

<div {{ buildID() }} class="navigation-wrapper {{ buildClass() }}">

  <div class="container-fluid elements-div-content_{{ name }}" style="{{ buildModuleStyles() }}">
    <div id="testimonial-card" class="cards elements-tc-cards_{{ name }}" {% if module.animation.enable_animation %}data-aos="{{ module.animation.animation }}-{% if module.animation.animation == "fade" %}{{ module.animation.direction_fade }}{% elif module.animation.animation == "flip" %}{{ module.animation.direction_flip }}{% elif module.animation.animation == "slide" %}{{ module.animation.direction_slide }}{% elif module.animation.animation == "zoom" %}{{ module.animation.direction_zoom }}{% endif %}"{% endif %} data-aos-once="{{ module.animation.frecuency }}" data-aos-duration="{{ module.animation.duration }}" data-aos-delay="{{ module.animation.delay }}"> 
      <div id="elements-carousel-slider__{{ name }}" class="keen-slider">
        {% for card in module.card %}   
        
        <div class="keen-slider__slide keen-slider__slide-carousel__{{ name }}">
          
          <div class="cards__card elements-tc-cards__card_{{ name }}">
            
            <div class="row-fluid-wrapper">
              <div class="row-fluid elements-module-row_{{ name }}">
                
                {% if module.module_styles.testimonial_type == 'type_1' %}                
                
                <div class="span4 widget-span widget-type-cell elements-tc-card__image-container_{{ name }}" style="" data-widget-type="cell" data-x="0" data-w="4">
                  <div class="elements-module-image_{{ name }}" style="{{ buildImageStyles() }}">
                    {% if card.author_image.src %}
                      {% set sizeAttrs = 'width="{{ card.author_image.width }}" height="{{ card.author_image.height }}"' %}
                      {% if card.author_image.size_type == 'auto' %}
                        {% set sizeAttrs = 'style="max-width: 100%; height: auto;"' %}
                      {% elif card.author_image.size_type == 'auto_custom_max' %}
                        {% set sizeAttrs = 'width="100%" height="auto" style="max-width: {{ card.author_image.max_width }}px; max-height: {{ card.author_image.max_height }}px"' %}
                      {% endif %}
                       {% set loadingAttr = card.author_image.loading != 'disabled' ? 'loading="{{ card.author_image.loading }}"' : '' %}
                      <img src="{{ card.author_image.src }}" alt="{{ card.author_image.alt }}" {{ loadingAttr }} {{ sizeAttrs }}>
                    {% endif %}
                  </div>
                </div>
                
                <div class="span8 widget-span widget-type-cell elements-tc-card__text-container_{{ name }}" style="" data-widget-type="cell" data-x="4" data-w="8">
                  
                  <div class="card__text elements-tc-card__text_{{ name }}">
                    {% inline_rich_text field="card.text" value="{{ card.text }}" %}
                  </div>
                  
                  <div class="row-fluid-wrapper">
                    <div class="row-fluid" style="margin-top: 8px;">
                      <div class="span6 widget-span widget-type-cell " style="padding-right: 24px;" data-widget-type="cell" data-x="0" data-w="6">
                        {% inline_rich_text field="card.author" value="{{ card.author }}" %}
                      </div>
                      <div class="span6 widget-span widget-type-cell elements-tc-card__logo-container_{{ name }}" data-widget-type="cell" data-x="6" data-w="6">
                        <div class="elements-tc-card__image_{{ name }}">
                          {% if card.image.src %}
                           {% set sizeAttrs = 'width="{{ card.image.width }}" height="{{ card.image.height }}"' %}
                          {% if card.image.size_type == 'auto' %}
                           {% set sizeAttrs = 'style="max-width: 100%; height: auto;"' %}
                          {% elif card.image.size_type == 'auto_custom_max' %}
                            {% set sizeAttrs = 'width="100%" height="auto" style="max-width: {{ card.image.max_width }}px; max-height: {{ card.image.max_height }}px"' %}
                          {% endif %}
                          {% set loadingAttr = card.image.loading != 'disabled' ? 'loading="{{ card.image.loading }}"' : '' %}
                            <img src="{{ card.image.src }}" alt="{{ card.image.alt }}" {{ loadingAttr }} {{ sizeAttrs }}>
                          {% endif %}
                        </div>
                      </div>

                    </div>
                  </div>

                </div>
                
                
                {% else %}
                
                
                <div class="span12 widget-span widget-type-cell elements-tc-card__text-container_{{ name }}" style="" data-widget-type="cell" data-x="0" data-w="12">
                  
                  <div class="card__text elements-tc-card__text_{{ name }}">
                    {% inline_rich_text field="card.text" value="{{ card.text }}" %}
                  </div>
                  
                  <div class="row-fluid-wrapper">
                    <div class="row-fluid" style="margin-top: 8px;">
                      <div class="span8 widget-span widget-type-cell elements-module-image-autor-type-2" data-widget-type="cell" data-x="0" data-w="8">
                        
                        
                        <div class="elements-module-image__type-2_{{ name }}" style="{{ buildImageStyles() }}">
                          {% if card.author_image.src %}
                            {% set sizeAttrs = 'width="{{ card.author_image.width }}" height="{{ card.author_image.height }}"' %}
                            {% if card.author_image.size_type == 'auto' %}
                              {% set sizeAttrs = 'style="max-width: 100%; height: auto;"' %}
                            {% elif card.author_image.size_type == 'auto_custom_max' %}
                              {% set sizeAttrs = 'width="100%" height="auto" style="max-width: {{ card.author_image.max_width }}px; max-height: {{ card.author_image.max_height }}px"' %}
                            {% endif %}
                             {% set loadingAttr = card.author_image.loading != 'disabled' ? 'loading="{{ card.author_image.loading }}"' : '' %}
                            <img src="{{ card.author_image.src }}" alt="{{ card.author_image.alt }}" {{ loadingAttr }} {{ sizeAttrs }}>
                          {% endif %}
                        </div>
                        
                        <span class="elements-module-card-autor-container">
                          {% inline_rich_text field="card.author" value="{{ card.author }}" %}
                        </span>
                        
                      </div>
                      <div class="span4 widget-span widget-type-cell elements-tc-card__logo-container_{{ name }}" data-widget-type="cell" data-x="8" data-w="4">
                        <div class="elements-tc-card__image_{{ name }}">
                          {% if card.image.src %}
                           {% set sizeAttrs = 'width="{{ card.image.width }}" height="{{ card.image.height }}"' %}
                          {% if card.image.size_type == 'auto' %}
                           {% set sizeAttrs = 'style="max-width: 100%; height: auto;"' %}
                          {% elif card.image.size_type == 'auto_custom_max' %}
                            {% set sizeAttrs = 'width="100%" height="auto" style="max-width: {{ card.image.max_width }}px; max-height: {{ card.image.max_height }}px"' %}
                          {% endif %}
                          {% set loadingAttr = card.image.loading != 'disabled' ? 'loading="{{ card.image.loading }}"' : '' %}
                            <img src="{{ card.image.src }}" alt="{{ card.image.alt }}" {{ loadingAttr }} {{ sizeAttrs }}>
                          {% endif %}
                        </div>
                      </div>

                    </div>
                  </div>

                </div>
                
                  
                
                {% endif %}
                

                
             </div>
            </div>

         </div>
        
      </div>
       
        {% endfor %}   
        
    </div>
     
        
  </div>

</div>
 <svg version="1.1" id="arrow-left__{{ name }}" class="arrow arrow--left" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="24px" viewBox="0 0 451.846 451.847" style="enable-background:new 0 0 451.846 451.847;" xml:space="preserve"> <g> <path d="M345.441,248.292L151.154,442.573c-12.359,12.365-32.397,12.365-44.75,0c-12.354-12.354-12.354-32.391,0-44.744 L278.318,225.92L106.409,54.017c-12.354-12.359-12.354-32.394,0-44.748c12.354-12.359,32.391-12.359,44.75,0l194.287,194.284 c6.177,6.18,9.262,14.271,9.262,22.366C354.708,234.018,351.617,242.115,345.441,248.292z"/></g></svg>
 <svg version="1.1" id="arrow-right__{{ name }}" class="arrow arrow--right" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="24px" viewBox="0 0 451.846 451.847" style="enable-background:new 0 0 451.846 451.847;" xml:space="preserve"> <g> <path d="M345.441,248.292L151.154,442.573c-12.359,12.365-32.397,12.365-44.75,0c-12.354-12.354-12.354-32.391,0-44.744 L278.318,225.92L106.409,54.017c-12.354-12.359-12.354-32.394,0-44.748c12.354-12.359,32.391-12.359,44.75,0l194.287,194.284 c6.177,6.18,9.262,14.271,9.262,22.366C354.708,234.018,351.617,242.115,345.441,248.292z"/></g></svg>

</div>
<div id="dots__{{ name }}" class="dots"></div>

{% require_css %}
<style>
  
  .elements-module-card-autor-container {
    padding-top: 6px;
  }
  
  .elements-module-image-autor-type-2 {
    display: inline-flex !important;
  }
  
  
  .elements-tc-card__logo-container_{{ name }} {
    padding-top: 24px;
  }
  
  .elements-tc-card__text-container_{{ name }} {
    padding-top: {{ module.paddings.desktop.text.top }}px;
    padding-bottom: {{ module.paddings.desktop.text.bottom }}px;
    padding-left:  {{ module.paddings.desktop.text.left }}px;
    padding-right: {{ module.paddings.desktop.text.right }}px;
  }

  .keen-slider__slide {
    padding: 16px 0 18px;
  }
  
  .dots {
    display: flex;
    padding: 10px 0;
    justify-content: center;
  }

  .dot {
    border: none;
    width: 10px;
    height: 10px;
    background: {{ theme.global_colors.neutral_colors.neutral_color_400.color }};
    border-radius: 50%;
    margin: 0 5px;
    padding: 5px;
    cursor: pointer;
  }

  .dot:focus {
    outline: none;
  }

  .dot--active {
    background: {{ theme.global_colors.primary_colors.primary_color_1.color }};
  }

  .arrow {
    width: 65px;
    height: 65px;
    position: absolute;
    top: 45%;
    fill: {{ theme.global_colors.primary_colors.primary_color_1.color }};
    background: {{ theme.global_colors.neutral_colors.neutral_color_100.color }};
    cursor: pointer;
    border: 1px solid {{ theme.global_colors.neutral_colors.neutral_color_300.color }};
    box-sizing: border-box;
    box-shadow: 0px -1px 5px rgb(31 37 89 / 1%), 0px 4px 9px rgb(38 54 200 / 8%);
    border-radius: 16px;
    transition: all 0.3s ease;
    opacity: 1;
  }

  .arrow--left {
    left: 5px;
    padding: 19px 5px 18px 8px;
    -webkit-transform: rotate(-180deg);
    -ms-transform: rotate(-180deg);
    transform: rotate(-180deg);
  }

  .arrow--right {
    left: auto;
    right: 5px;
    padding: 19px 5px 18px 8px;
  }
  
  .arrow--left:hover {
    -webkit-transform : rotate(-180deg) scale(1.1);
    -ms-transform     : rotate(-180deg) scale(1.1);
    transform         : rotate(-180deg) scale(1.1); 
    fill: {{ theme.global_colors.neutral_colors.neutral_color_100.color }};
    background: {{ theme.global_colors.primary_colors.primary_color_1.color }};
  }
  
  .arrow--right:hover {
    transform: scale(1.1);
    fill: {{ theme.global_colors.neutral_colors.neutral_color_100.color }};
    background: {{ theme.global_colors.primary_colors.primary_color_1.color }};
  }
  
  .arrow--disabled {
    opacity: 0;
    cursor: default;
  }
  
  .elements-module-image__type-2_{{ name }} img {
    border-radius: 50px;
    object-fit: cover;
    filter: drop-shadow(0px 5px 8px rgba(33, 11, 121, 0.08));
    border: 4px solid #ffffff;
    width: 68px !important;
    height: 68px !important;
    margin-right: 14px;
  }
  
  .elements-module-image_{{ name }} img {
    border-radius: 36px;
  }    

  .elements-tc-cards_{{ name }} {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -ms-flex-wrap: grap;
    flex-wrap: grap;
    -webkit-box-pack: center;
    -ms-flex-pack: center;
  }

  .elements-tc-cards__card_{{ name }} {
    text-align: left;
    margin: auto;
    max-width: {{ module.module_styles.max_width_card }}px;
    padding: 36px;
    transition: transform 0.3s ease;
    background-color: #FFFFFF;
    width: 100%;
  }

  .elements-tc-card__image_{{ name }} {
    height: auto;
    width: 100%;
    text-align: right;

  }

  .elements-tc-card__text_{{ name }} {
    padding: 0 0rem 0.5rem;
    text-align: left;
    width: 100%;
  }


@media(max-width: 1224px) {
  .elements-tc-cards__card_{{ name }} {
    width: 84%;
  }
}

@media(max-width: 987px) {
  
  .elements-tc-cards__card_{{ name }} {
    width: 78%;
  }
  
}
  
@media(min-width: 768px) {
  .elements-tc-cards__card_{{ name }}:hover {
    transform: scale(1.02) !important;
  }
}


@media(max-width: 767px) {
  
  .elements-tc-cards__card_{{ name }}:hover {
    transform: none !important;
  }
  
  .dots {   
    padding: 24px 0;    
  }
  
  
  .elements-tc-card__text-container_{{ name }} {
    padding-top: {{ module.paddings.mobile.text.top }}px;
    padding-bottom: {{ module.paddings.mobile.text.bottom }}px;
    padding-left:  {{ module.paddings.mobile.text.left }}px;
    padding-right: {{ module.paddings.mobile.text.right }}px;
  }
  
  .elements-tc-cards__card_{{ name }} {
   padding: 24px 24px 40px;
   width: 100%;
  }
  
  .elements-tc-cards_{{ name }} {
    flex-direction: column;
    justify-content: center;
  }
  
  {% if module.module_styles.testimonial_type == 'type_1' %} 
  
   .elements-tc-card__logo-container_{{ name }} {
    width: 100% !important;
    padding-top: 12px;
  }
  
  {% elif module.module_styles.testimonial_type == 'type_2' %} 
     .elements-tc-card__logo-container_{{ name }} {
      width: 100% !important;
      padding-top: 24px;
    }
  
  {% endif %}
 
  
  .elements-tc-card__image_{{ name }} {
    text-align: left;
  }
  
  .elements-tc-card__image_{{ name }} img {
    width: 50% !important;
  }
  
  .keen-slider__slide {
    padding: 0;
  }
  
}
  
@media(min-width: 1089px) {
  
  .elements-module-row_{{ name }} {
    display: flex;
    align-items: center;
    justify-content: center;
  }
}
  
@media(max-width: 1088px) {
  
  .elements-tc-card__image-container_{{ name }} {
    width: 100% !important;
  }
  
  .elements-tc-card__text-container_{{ name }} {
    width: 100% !important;
    margin-left: 0 !important;
  }
  
  .elements-tc-card__text-container_{{ name }} {
    padding-left:  0px;
    padding-top: 24px;
  }

}
  

  
@media(max-width: 767px) {
  
  
  .elements-module-image_{{ name }} {
    text-align: center !important;
  }
    
  .arrow {
    width: 38px;
    height: 38px;    
    border-radius: 12px;
    opacity: 0;
  }
    
  .arrow--left {
    left: 0px;
    padding: 10px 6px 8px 5px;
  }
   
  .arrow--right {
    left: auto;
    right: 0px;
    padding: 10px 5px 8px 6px;
  }
    
  .elements-div-content_{{ name }} {
    padding-top: {{ module.paddings.mobile.module.top }}px !important;
    padding-bottom: {{ module.paddings.mobile.module.bottom }}px !important;
    padding-left: {{ module.paddings.mobile.module.left }}px !important;
    padding-right: {{ module.paddings.mobile.module.right }}px !important;
  }
    
  .elements-module-image_{{ name }} {
    padding-top: {{ module.paddings.mobile.image.top }}px !important;
    padding-bottom: {{ module.paddings.mobile.image.bottom }}px !important;
    padding-left: {{ module.paddings.mobile.image.left }}px !important;
    padding-right: {{ module.paddings.mobile.image.right }}px !important;
  }
    
  .elements-module-content_{{ name }} {
    padding-top: {{ module.paddings.mobile.content.top }}px !important;
    padding-bottom: {{ module.paddings.mobile.content.bottom }}px !important;
    padding-left: {{ module.paddings.mobile.content.left }}px !important;
    padding-right: {{ module.paddings.mobile.content.right }}px !important;
  }

}
  
</style>
{% end_require_css %}

{% require_js %}
<script>
  
  {% set mid = module | pprint | md5 %}
  
  var slider__{{ mid }} = new KeenSlider("#elements-carousel-slider__{{ name }}", {
  created: function (instance) {
    document
      .getElementById("arrow-left__{{ name }}")
      .addEventListener("click", function () {
        instance.prev()
      })

    document
      .getElementById("arrow-right__{{ name }}")
      .addEventListener("click", function () {
        instance.next()
      })
    var dots_wrapper = document.getElementById("dots__{{ name }}")
    var slides = document.querySelectorAll(".keen-slider__slide-carousel__{{ name }}")
    slides.forEach(function (t, idx) {
      var dot = document.createElement("button")
      dot.classList.add("dot", "dot__{{ name }}")
      dots_wrapper.appendChild(dot)
      dot.addEventListener("click", function () {
        instance.moveToSlide(idx)
      })
    })
    updateClasses__{{ mid }}(instance)
  },
  slideChanged(instance) {
    updateClasses__{{ mid }}(instance)
  },
})

function updateClasses__{{ mid }}(instance) {
  var slide = instance.details().relativeSlide
  var arrowLeft = document.getElementById("arrow-left__{{ name }}")
  var arrowRight = document.getElementById("arrow-right__{{ name }}")
  slide === 0
    ? arrowLeft.classList.add("arrow--disabled")
    : arrowLeft.classList.remove("arrow--disabled")
  slide === instance.details().size - 1
    ? arrowRight.classList.add("arrow--disabled")
    : arrowRight.classList.remove("arrow--disabled")

  var dots = document.querySelectorAll(".dot__{{ name }}")
  dots.forEach(function (dot, idx) {
    idx === slide
      ? dot.classList.add("dot--active")
      : dot.classList.remove("dot--active")
  })
}


</script>
{% end_require_js %}

  